{% extends "base.html" %}
{% block title %}–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å{% endblock %}
{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <h4 class="mb-4">üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üì± –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏</h5>
                </div>
                <div class="card-body">
                    <div id="sessions-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button class="btn btn-danger mt-3" onclick="kickAllSessions()">
                        üö™ –ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫</h5>
                </div>
                <div class="card-body">
                    <p><strong>Rate Limiting:</strong> 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω</p>
                    <p><strong>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:</strong> 5 –º–∏–Ω –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏</p>
                    <p><strong>–°–µ—Å—Å–∏–∏:</strong> –º–∞–∫—Å. 5 –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
                    <p><strong>–¢–∞–π–º–∞—É—Ç:</strong> 2 —á–∞—Å–∞</p>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
function loadSessions() {
    fetch('/api/sessions')
        .then(r => r.json())
        .then(data => {
            if (data.success) {
                let html = '<table class="table table-sm"><thead><tr><th>ID</th><th>IP</th><th>–í—Ä–µ–º—è</th><th></th></tr></thead><tbody>';
                data.sessions.forEach(s => {
                    html += `<tr><td>${s.id}</td><td>${s.ip}</td><td>${s.time}</td><td>${s.current ? '<span class="badge bg-success">–¢–µ–∫—É—â–∞—è</span>' : ''}</td></tr>`;
                });
                html += '</tbody></table>';
                document.getElementById('sessions-list').innerHTML = html;
            }
        });
}
function kickAllSessions() {
    if (confirm('–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏ –∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π?')) {
        fetch('/api/sessions/kick-all', {method: 'POST'})
            .then(r => r.json())
            .then(data => {
                alert(data.message);
                loadSessions();
            });
    }
}
loadSessions();
</script>
{% endblock %}
