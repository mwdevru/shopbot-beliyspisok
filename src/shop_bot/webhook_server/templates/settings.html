{% extends "base.html" %} {% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–æ—Ç–∞{% endblock %}
{% block content %}

<h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>

<div class="settings-container">
	<div class="settings-column-left">
		<section class="settings-section">
			<h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–∞—Ä–∏—Ñ–∞–º–∏</h2>

			<div class="host-card">
				<h4>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ</h4>
				<form action="{{ url_for('add_plan_route') }}" method="post">
					<div class="form-group">
						<label for="plan_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞:</label>
						<input type="text" id="plan_name" name="plan_name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1 –º–µ—Å—è—Ü" required />
					</div>
					<div class="form-group">
						<label for="days">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π (1-365):</label>
						<input type="number" id="days" name="days" min="1" max="365" placeholder="30" required />
					</div>
					<div class="form-group">
						<label for="price">–¶–µ–Ω–∞ (RUB):</label>
						<input type="number" step="0.01" id="price" name="price" placeholder="100" required />
					</div>
					<button type="submit" class="button button-primary">–î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</button>
				</form>
			</div>

			{% if plans %}
			<div class="host-card">
				<h4>–¢–µ–∫—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã</h4>
				<ul class="plan-list">
					{% for plan in plans %}
					<li>
						<span>{{ plan.plan_name }} ({{ plan.days }} –¥–Ω.) - {{ plan.price|round(0) }} RUB</span>
						<form action="{{ url_for('delete_plan_route', plan_id=plan.plan_id) }}" method="post">
							<button type="submit" class="button button-danger button-tiny">√ó</button>
						</form>
					</li>
					{% endfor %}
				</ul>
			</div>
			{% else %}
			<p>–¢–∞—Ä–∏—Ñ—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
			{% endif %}
		</section>
	</div>

	<div class="settings-column-right">
		<form action="{{ url_for('settings_page') }}" method="post">
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–∞–Ω–µ–ª–∏</h2>
				<div class="form-group">
					<label for="panel_login">–õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø–∞–Ω–µ–ª—å:</label>
					<input type="text" id="panel_login" name="panel_login" value="{{ settings.panel_login or '' }}" required />
				</div>
				<div class="form-group password-wrapper">
					<label for="panel_password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å):</label>
					<input type="password" id="panel_password" name="panel_password" />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MWShark API (–†–µ—Å–µ–ª–ª–∏–Ω–≥)</h2>
				<p class="help-text">–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –≤ –±–æ—Ç–µ <a href="https://vpn.mwshark.host" target="_blank">vpn.mwshark.host</a></p>
				<div class="form-group password-wrapper">
					<label for="mwshark_api_key">API –ö–ª—é—á MWShark:</label>
					<input type="password" id="mwshark_api_key" name="mwshark_api_key" value="{{ settings.mwshark_api_key or '' }}" required />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–æ—Ç–∞</h2>
				<div class="form-group password-wrapper">
					<label for="telegram_bot_token">–¢–æ–∫–µ–Ω –±–æ—Ç–∞:</label>
					<input type="password" id="telegram_bot_token" name="telegram_bot_token" value="{{ settings.telegram_bot_token or '' }}" required />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group">
					<label for="telegram_bot_username">Username –±–æ—Ç–∞ (–±–µ–∑ @):</label>
					<input type="text" id="telegram_bot_username" name="telegram_bot_username" value="{{ settings.telegram_bot_username or '' }}" required />
				</div>
				<div class="form-group">
					<label for="admin_telegram_id">Telegram ID –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</label>
					<input type="text" id="admin_telegram_id" name="admin_telegram_id" value="{{ settings.admin_telegram_id or '' }}" required />
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∏</h2>
				<div class="form-group">
					<label for="support_user">URL –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –ë–æ—Ç–∞-–°–∞–ø–ø–æ—Ä—Ç–∞:</label>
					<input type="text" id="support_user" name="support_user" value="{{ settings.support_user or '' }}" />
				</div>
				<div class="form-group password-wrapper">
					<label for="support_bot_token">–¢–æ–∫–µ–Ω Support-–±–æ—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):</label>
					<input type="password" id="support_bot_token" name="support_bot_token" value="{{ settings.support_bot_token or '' }}" />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group">
					<label for="support_group_id">ID –ì—Ä—É–ø–ø—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</label>
					<input type="text" id="support_group_id" name="support_group_id" value="{{ settings.support_group_id or '' }}" />
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="enable_referrals" value="false" />
					<input type="checkbox" id="enable_referrals" name="enable_referrals" value="true" {% if settings.enable_referrals == 'true' %}checked{% endif %}>
					<label for="enable_referrals">–í–∫–ª—é—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É</label>
				</div>
				<div class="form-group">
					<label for="minimum_withdrawal">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞:</label>
					<input type="number" id="minimum_withdrawal" name="minimum_withdrawal" value="{{ settings.minimum_withdrawal or '10' }}" />
				</div>
				<div class="form-group">
					<label for="referral_percentage">–ü—Ä–æ—Ü–µ–Ω—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–º—É (%):</label>
					<input type="number" id="referral_percentage" name="referral_percentage" value="{{ settings.referral_percentage or '10' }}" />
				</div>
				<div class="form-group">
					<label for="referral_discount">–°–∫–∏–¥–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É (%):</label>
					<input type="number" id="referral_discount" name="referral_discount" value="{{ settings.referral_discount or '5' }}" />
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="trial_enabled" value="false" />
					<input type="checkbox" id="trial_enabled" name="trial_enabled" value="true" {% if settings.trial_enabled == 'true' %}checked{% endif %}>
					<label for="trial_enabled">–í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥</label>
				</div>
				<div class="form-group">
					<label for="trial_duration_days">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (–≤ –¥–Ω—è—Ö):</label>
					<input type="number" id="trial_duration_days" name="trial_duration_days" value="{{ settings.trial_duration_days or '3' }}" />
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–ª–∞—Ç–µ–∂–Ω—ã—Ö –°–∏—Å—Ç–µ–º</h2>
				<h3>YooKassa</h3>
				<div class="form-group">
					<label for="receipt_email">–ü–æ—á—Ç–∞ –¥–ª—è —á–µ–∫–æ–≤:</label>
					<input type="text" id="receipt_email" name="receipt_email" value="{{ settings.receipt_email or '' }}" />
				</div>
				<div class="form-group">
					<label for="yookassa_shop_id">YooKassa Shop ID:</label>
					<input type="text" id="yookassa_shop_id" name="yookassa_shop_id" value="{{ settings.yookassa_shop_id or '' }}" />
				</div>
				<div class="form-group password-wrapper">
					<label for="yookassa_secret_key">YooKassa Secret Key:</label>
					<input type="password" id="yookassa_secret_key" name="yookassa_secret_key" value="{{ settings.yookassa_secret_key or '' }}" />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="sbp_enabled" value="false" />
					<input type="checkbox" id="sbp_enabled" name="sbp_enabled" value="true" {% if settings.sbp_enabled == 'true' %}checked{% endif %}>
					<label for="sbp_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –°–ë–ü</label>
				</div>

				<h3>CryptoBot</h3>
				<div class="form-group password-wrapper">
					<label for="cryptobot_token">CryptoBot Token:</label>
					<input type="password" id="cryptobot_token" name="cryptobot_token" value="{{ settings.cryptobot_token or '' }}" />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>

				<h3>Heleket</h3>
				<div class="form-group">
					<label for="heleket_merchant_id">Heleket Merchant ID:</label>
					<input type="text" id="heleket_merchant_id" name="heleket_merchant_id" value="{{ settings.heleket_merchant_id or '' }}" />
				</div>
				<div class="form-group password-wrapper">
					<label for="heleket_api_key">Heleket API Key:</label>
					<input type="password" id="heleket_api_key" name="heleket_api_key" value="{{ settings.heleket_api_key or '' }}" />
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group">
					<label for="domain">–í–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, my-shop.com):</label>
					<input type="text" id="domain" name="domain" value="{{ settings.domain or '' }}" />
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–æ–Ω—Ç–µ–Ω—Ç–∞</h2>
				<div class="form-group">
					<label for="about_text">–¢–µ–∫—Å—Ç "–û –ø—Ä–æ–µ–∫—Ç–µ":</label>
					<textarea id="about_text" name="about_text" rows="3">{{ settings.about_text or "" }}</textarea>
				</div>
				<div class="form-group">
					<label for="support_text">–¢–µ–∫—Å—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–¥–¥–µ—Ä–∂–∫–∞":</label>
					<textarea id="support_text" name="support_text" rows="3">{{ settings.support_text or "" }}</textarea>
				</div>
				<div class="form-group">
					<label for="terms_url">URL "–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è":</label>
					<input type="url" id="terms_url" name="terms_url" value="{{ settings.terms_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="privacy_url">URL "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏":</label>
					<input type="url" id="privacy_url" name="privacy_url" value="{{ settings.privacy_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="channel_url">URL Telegram-–∫–∞–Ω–∞–ª–∞:</label>
					<input type="url" id="channel_url" name="channel_url" value="{{ settings.channel_url or '' }}" />
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="force_subscription" value="false" />
					<input type="checkbox" id="force_subscription" name="force_subscription" value="true" {% if settings.force_subscription == 'true' %}checked{% endif %}>
					<label for="force_subscription">–¢—Ä–µ–±–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª</label>
				</div>
				<div class="form-group">
					<label for="android_url">URL "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ê–Ω–¥—Ä–æ–∏–¥":</label>
					<input type="url" id="android_url" name="android_url" value="{{ settings.android_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="ios_url">URL "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è iOS":</label>
					<input type="url" id="ios_url" name="ios_url" value="{{ settings.ios_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="windows_url">URL "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Windows":</label>
					<input type="url" id="windows_url" name="windows_url" value="{{ settings.windows_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="linux_url">URL "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Linux":</label>
					<input type="url" id="linux_url" name="linux_url" value="{{ settings.linux_url or '' }}" />
				</div>
			</section>

			<button type="submit" class="button button-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
		</form>
	</div>
</div>

{% endblock %}
