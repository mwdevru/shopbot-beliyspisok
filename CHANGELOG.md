# Changelog

## [1.4.6] - 2026-01-12

### Исправления
- Исправлена критическая ошибка с дублированием настроек в БД
- Настройки теперь корректно отображаются в панели
- Исправлена пагинация на странице транзакций
- Добавлена автоматическая очистка дубликатов при запуске

---

## [1.4.5] - 2026-01-12

### Исправления
- Исправлено сохранение настроек (добавлен commit)
- Настройки теперь сохраняются после рестарта
- Добавлены недостающие ключи Platega в defaults

---

## [1.4.4] - 2026-01-12

### Исправления
- Исправлено сохранение настроек платежей
- Исправлено форматирование цены тарифов
- Polling проверка CryptoBot платежей без webhook
- Исправлена проверка бана пользователей

---

## [1.4.3] - 2026-01-12

### Панель управления
- Платежи вынесены в отдельный раздел
- Выбор метода оплаты для Platega (СБП QR / Карта / СБП по номеру)

---

## [1.4.2] - 2026-01-12

### Платежи
- Интеграция Platega (карта/СБП)
- Webhook для мгновенного подтверждения
- Polling проверка статуса если webhook не настроен

---

## [1.4.1] - 2026-01-12

### Панель управления
- Тарифы вынесены в отдельный раздел меню
- Страница настроек упрощена

---

## [1.4.0] - 2026-01-12

### База данных
- Миграция на aiosqlite для асинхронных операций
- Автоматический перенос данных из users.db в data.db
- Резервное копирование старой БД (.db.bak)

### Система обновлений
- Автопроверка новых версий на GitHub
- Уведомление в шапке панели
- Обновление в один клик

### Управление ключами
- Отзыв отдельного ключа пользователя
- Кнопка отзыва в карточке каждого ключа

---

## [1.3.0] - 2026-01-12

### Панель управления
- Новая страница детального управления пользователем
- Модальное окно с полной информацией о пользователе
- История ключей пользователя
- Отправка сообщений напрямую из карточки

### Новые страницы
- **Транзакции** — полная история платежей со статистикой
- **API Статистика** — баланс MW API, гранты, история покупок
- **Рассылка** — массовая отправка сообщений из панели

### Пользователи
- Поиск по ID и username
- Фильтры: все / с ключами / без ключей
- Экспорт в CSV
- Расширенная статистика

---

## [1.2.0] - 2026-01-12

### API интеграция
- Отзыв ключей через MW API (`/subscription/revoke`)
- Синхронизация с API при удалении ключей

### Дизайн
- Полный редизайн админ-панели
- Современный тёмный UI
- Боковое меню с навигацией
- Адаптивная вёрстка для мобильных
- Шрифт Inter

---

## [1.1.0] - 2026-01-11

### Основа
- Форк vless-shopbot
- Интеграция MW API
- Создание и продление подписок
- YooKassa, CryptoBot, Heleket
- Реферальная система
- Пробный период
- Support-бот

---

## Планы

- [ ] TON оплата
- [ ] Уведомления об истечении ключей
- [ ] Статистика по дням/неделям
- [ ] Промокоды
